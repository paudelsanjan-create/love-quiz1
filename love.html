<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Do you know our love story? ðŸ’“</title>
<style>
  body { font-family: Arial, sans-serif; background: #fff0f5; color: #333; margin: 0; padding: 0; position: relative;}
  .container { max-width: 700px; margin: 50px auto; padding: 20px; background: #ffe6f0; border-radius: 15px; box-shadow: 0 0 10px rgba(0,0,0,0.1);}
  h1 { text-align: center; color: #ff4da6;}
  .question { margin: 20px 0; font-weight: bold; }
  .options button { display: block; margin: 10px 0; padding: 10px; width: 100%; border-radius: 10px; border: none; background: #ff99cc; color: white; cursor: pointer; font-size: 16px; position: relative; }
  .options button:hover { background: #ff66b3; }
  .result { text-align: center; font-size: 20px; margin-top: 30px; color: #ff1a8c;}
  #nextBtn { margin-top: 20px; padding: 10px 20px; font-size: 16px; border-radius: 10px; border: none; background: #ff4da6; color: white; cursor: pointer;}
  #nextBtn:hover { background: #ff1a8c; }
  #createQuiz { margin-top: 30px; display:block; text-align:center; font-size:14px; color:#666;}
  textarea { width:100%; height:100px; border-radius:10px; padding:10px; margin-top:10px; font-family:Arial; }

  /* Heart animations */
  .confetti-heart {
    position: absolute;
    font-size: 24px;
    animation: fall 3s linear forwards;
    pointer-events: none;
    z-index: 1000;
  }

  @keyframes fall {
    0% { transform: translateY(0) rotate(0deg); opacity:1; }
    100% { transform: translateY(500px) rotate(360deg); opacity:0; }
  }
</style>
</head>
<body>

<div class="container">
  <h1>Do you really know our love story? ðŸ’“</h1>
  <div id="quizContainer"></div>
  <div id="result" class="result"></div>
  <button id="nextBtn" style="display:none;">Next</button>
  <div id="createQuiz">
    Want to make your own quiz? <a href="#" onclick="showCreateForm()">Click here!</a>
  </div>
  <div id="createForm" style="display:none;">
    <h2>Create Your Own Quiz</h2>
    <p>Enter your questions in JSON format:</p>
    <textarea id="customQuiz" placeholder='[{"q":"Question?","options":["A","B","C","D"],"answer":0}]'></textarea>
    <button onclick="generateCustomQuiz()">Generate Quiz</button>
    <p id="customLink"></p>
  </div>
</div>

<script>
let questions = [
  {q:"When did Meera send me the friend request?", options:["Sept 19, 2022 (Ashoj 3, 2079)","Chaitra 14, 2079","Jan 18, 2023 (Magh 4, 2079)","Baisakh 1st, 2079"], answer:0},
  {q:"When did Meera first message me?", options:["Oct 3, 2022 (Ashoj 17, 2079)","Magh 4, 2079","March 28, 2023 (Chaitra 14, 2079)","Poush 23, 2080"], answer:0},
  {q:"On which date did we start talking daily?", options:["Jan 18, 2023 (Magh 4, 2079)","March 28, 2023 (Chaitra 14, 2079)","Ashoj 3, 2079","Valentineâ€™s Day 2023"], answer:0},
  {q:"When did our relationship officially start?", options:["March 28, 2023 (Chaitra 14, 2079)","Poush 23, 2080","Magh 10, 2080","Falgun 24, 2080"], answer:0},
  {q:"At what time did Meera propose?", options:["7:56 AM","8:00 AM","12:00 midnight","3:00 AM"], answer:0},
  {q:"When did Meera first hold my hand?", options:["Jan 7, 2024 (Poush 23, 2080)","March 28, 2023","Feb 6, 2024 (Falgun 24, 2080)","Magh 10, 2080"], answer:0},
  {q:"When was our first proper hug?", options:["Jan 24, 2024 (Magh 10, 2080)","Poush 23, 2080","March 28, 2023","Valentineâ€™s 2024"], answer:0},
  {q:"When was our first kiss?", options:["Feb 6, 2024 (Falgun 24, 2080)","Magh 10, 2080","March 28, 2023","Still pending"], answer:0},
  {q:"What do I call Meera the most?", options:["Mayaalu","Baby","Darling","Mrs. Messi"], answer:0},
  {q:"Which emojis do I mostly use for her?", options:["ðŸ’‹ðŸ’—ðŸ˜­ðŸ’“ðŸ©·","â¤ðŸ˜˜","ðŸ˜ðŸ’ž","ðŸ˜‚ðŸ¤£ðŸ”¥"], answer:0},
  {q:"My favorite subject in school?", options:["Physics","Chemistry","Lunch break","English"], answer:2},
  {q:"Dream travel destination?", options:["Switzerland","Paris","Maldives","Pokhara"], answer:0},
  {q:"My usual drink?", options:["Tea","Coffee","Juice","Coke"], answer:1},
  {q:"My favorite footballer?", options:["Messi","Ronaldo","Neymar","MbappÃ©"], answer:0},
  {q:"My favorite plant in the garden?", options:["Clerodendrum","Rose","Sunflower","Marijuana"], answer:1},
  {q:"Where do I mostly chat with Meera?", options:["Messenger","Instagram","WhatsApp","Pigeon letter delivery"], answer:1},
  {q:"My go-to way of showing love?", options:["Writing poems/notes","Buying gifts","Long calls","TikTok duet"], answer:0},
  {q:"Planned gift for Meera?", options:["A notebook full of poems","Perfume","Soft toy","Diamond ring"], answer:0},
  {q:"What do I always worry about most in our relationship?", options:["How Meera feels","My hairstyle","What others think","The future"], answer:0},
  {q:"Whatâ€™s the one promise I gave Meera?", options:["To always love her","To bring momo every date","To never fight","To travel the world"], answer:0}
];

let currentQuestion = 0;
let score = 0;

// Shuffle utility
function shuffleArray(array) {
  for (let i = array.length - 1; i > 0; i--) {
    const j = Math.floor(Math.random() * (i + 1));
    [array[i], array[j]] = [array[j], array[i]];
  }
  return array;
}

function showQuestion(){
  const container = document.getElementById('quizContainer');
  container.style.display='block';
  container.innerHTML = '';
  if(currentQuestion < questions.length){
    const q = questions[currentQuestion];

    const qDiv = document.createElement('div');
    qDiv.className = 'question';
    qDiv.innerText = q.q;
    container.appendChild(qDiv);

    const optionObjects = q.options.map((text,index)=>({text,index}));
    shuffleArray(optionObjects);

    const optionsDiv = document.createElement('div');
    optionsDiv.className = 'options';
    optionObjects.forEach(optObj=>{
      const btn = document.createElement('button');
      btn.innerText = optObj.text;
      btn.onclick = ()=>{ checkAnswer(optObj.index, btn); };
      optionsDiv.appendChild(btn);
    });
    container.appendChild(optionsDiv);

  }else{
    showResult();
  }
}

function checkAnswer(index, btn){
  const optionButtons = document.querySelectorAll('.options button');
  optionButtons.forEach(b => b.disabled = true);

  const heart = document.createElement('div');
  heart.style.position = 'absolute';
  heart.style.fontSize = '24px';
  heart.style.top = btn.getBoundingClientRect().top + window.scrollY - 20 + 'px';
  heart.style.left = btn.getBoundingClientRect().left + window.scrollX + 20 + 'px';
  heart.style.zIndex = 1000;
  heart.style.transition = 'all 1s ease-out';
  heart.style.pointerEvents = 'none';

  if(index === questions[currentQuestion].answer){
    score++;
    btn.style.background = 'green';
    heart.innerText = 'ðŸ’“';
  }else{
    btn.style.background = 'red';
    optionButtons[questions[currentQuestion].answer].style.background = 'green';
    heart.innerText = 'ðŸ’”';
  }

  document.body.appendChild(heart);

  setTimeout(()=>{
    heart.style.transform = 'translateY(-50px) scale(0.5)';
    heart.style.opacity = '0';
  }, 50);

  setTimeout(()=>heart.remove(), 1000);

  currentQuestion++;
  setTimeout(showQuestion, 1000);
}

function showResult(){
  document.getElementById('quizContainer').style.display = 'none';
  const resultDiv = document.getElementById('result');

  if(score === 20){
    resultDiv.innerHTML = "Mayaalu ðŸ’—, you are the reason behind all these answers. This whole story is ours â€” every date, every hug, every smile. Youâ€™re not just my highest scorer, youâ€™re my everything ðŸ’‹ðŸ’—ðŸ˜­ðŸ’“ðŸ©·.";
  }else if(score >=15){
    resultDiv.innerHTML = "Wow ðŸ’— You know our love story better than anyone! Youâ€™re basically part of it ðŸ©·.";
  }else if(score >=10){
    resultDiv.innerHTML = "Pretty good! You know most of our story ðŸ’‹.";
  }else if(score >=5){
    resultDiv.innerHTML = "Hmm ðŸ˜… you know some things, but not the full love story yet.";
  }else{
    resultDiv.innerHTML = "ðŸ˜­ Do we even talk? You need to study our timeline again!";
  }

  // Heart confetti if all correct
  if(score === 20){
    for(let i=0; i<50; i++){
      const heart = document.createElement('div');
      heart.className = 'confetti-heart';
      heart.innerText = 'ðŸ’“';
      heart.style.left = Math.random() * window.innerWidth + 'px';
      heart.style.fontSize = (15 + Math.random()*20) + 'px';
      heart.style.animationDuration = (2 + Math.random()*2) + 's';
      document.body.appendChild(heart);
      setTimeout(()=>heart.remove(), 3000);
    }
  }
}

function showCreateForm(){
  document.getElementById('createForm').style.display='block';
}

function generateCustomQuiz(){
  const data = document.getElementById('customQuiz').value;
  try{
    const customQuestions = JSON.parse(data);
    if(!Array.isArray(customQuestions)) throw "Not an array";
    questions = customQuestions;
    currentQuestion = 0;
    score = 0;
    document.getElementById('result').innerHTML = '';
    showQuestion();
  } catch(e){
    alert('Invalid JSON format. Make sure it is an array of questions.');
  }
}

// Start quiz on page load
showQuestion();
</script>

</body>
</html>